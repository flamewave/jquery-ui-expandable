/*!
* jQuery UI Expandable v1.2.1
*
* Copyright 2011, Tony Kramer
* Dual licensed under the MIT or GPL Version 2 licenses.
* https://github.com/flamewave/jquery-ui-expandable/raw/master/GPL-LICENSE.txt
* https://github.com/flamewave/jquery-ui-expandable/raw/master/MIT-LICENSE.txt
*
* https://github.com/flamewave/jquery-ui-expandable
*/
(function(a){a.widget("ui.expandable",{version:"1.2.1",options:{disabled:false,defaultState:null,titleSelector:"> h3",icon:{collapsed:"ui-icon-triangle-1-e",collapsedTitle:null,expanded:"ui-icon-triangle-1-s",expandedTitle:null},expanded:null,collapsed:null,contentSet:null,expandAll:null,collapseAll:null,toggleAll:null,showFx:{effect:"show",options:{},duration:"normal",callback:null},hideFx:{effect:"hide",options:{},duration:"normal",callback:null},ajax:{enabled:false,attr:"rel",cache:true,options:null,failedLoad:null}},_isTable:false,_headers:null,_getContentElement:function(b){return b.next()},_getContentContainer:function(b){return b.next()},_getIconContainer:function(b){return b},_create:function(){this._isTable=this.widget().attr("tagName").toLowerCase()==="table";if(this._isTable&&(!this.options.titleSelector||!this.options.titleSelector.length||this.options.titleSelector.toLowerCase()==="> h3")){this.options.titleSelector="> tbody > tr:even"}if(this._isTable){this._getContentElement=function(b){return b.next().children("td,th").first()};this._getIconContainer=function(b){return b.find("th,td").first()}}this.widget().addClass("ui-helper-reset ui-widget ui-expandable");this._headers=this.widget().find(this.options.titleSelector);this._createExpandos()},destroy:function(){this.widget().removeData("expandable.ajaxLoaded").removeClass("ui-helper-reset ui-widget ui-expandable");var b=this,c=this._useIcons();this._headers.each(function(f){var e=a(this),d=b._getContentContainer(e);e.removeClass("ui-widget-header ui-expandable-header ui-corner-top ui-corner-all ui-expandable-table-header").unbind("click.expandable");d.show().removeClass("ui-corner-bottom ui-widget-content ui-expandable-content ui-expandable-table-content");if(!b._isTable){d.next().remove()}if(c){b._removeIcon(e)}});this._headers=null;a.Widget.prototype.destroy.call(this);return this},refresh:function(){this._headers=this.widget().find(this.options.titleSelector);this._createExpandos()},count:function(){return this._headers.length},_createExpandos:function(){var b=this,c=this._useIcons();this._headers.each(function(f){var e=a(this);if(e.data("expandable.created")===true){if(e.data("expandable.index")!==f){e.data("expandable.index",f).unbind("click.expandable").bind("click.expandable",function(){b.toggle(f)})}return}var g=b._getItemStateFromObj(f,e,b.options.defaultState,true),d=b._getContentContainer(e);e.data("expandable.created",true).data("expandable.index",f).bind("click.expandable",function(){b.toggle(f)});d[g?"show":"hide"]();if(b._isTable){e.addClass("ui-expandable-table-header");d.addClass("ui-expandable-table-content")}else{e.addClass("ui-helper-reset ui-widget-header ui-expandable-header").addClass(g?"ui-corner-top":"ui-corner-all");d.addClass("ui-helper-reset ui-corner-bottom ui-widget-content ui-expandable-content").after(a('<div class="ui-expandable-spacer">&nbsp;</div>'))}if(c){b._addIcon(e,g)}})},_useIcons:function(){return this.options.icon!==undefined&&this.options.icon!==null&&typeof this.options.icon.collapsed==="string"&&this.options.icon.collapsed.length>0&&typeof this.options.icon.expanded==="string"&&this.options.icon.expanded.length>0},_addIcon:function(b,c){this._getIconContainer(b).prepend(a('<span class="ui-icon ui-expandable-icon">&nbsp;</span>').addClass(c?this.options.icon.expanded:this.options.icon.collapsed).attr("title",c?(this.options.icon.expandedTitle||a.ui.expandable.globalization.defaultIconExpandedTitle):(this.options.icon.collapsedTitle||a.ui.expandable.globalization.defaultIconCollapsedTitle)))},_removeIcon:function(b){this._getIconContainer(b).children(".ui-expandable-icon").remove()},_setOption:function(b,d){var c=this;switch(b){case"disabled":if(d){this.disable()}else{this.enable()}break;case"icon":this._headers.each(function(){var e=a(this);c._removeIcon(e);c._addIcon(e,c._isExpanded(e))});case"defaultState":case"titleSelector":throw b+" option can only be set on creation.";default:a.Widget.prototype._setOption.call(this,b,d);break}return this},disable:function(b){this.options.disabled=true;this._parseItems(b,function(c){c.add(this._getContentContainer(c)).addClass("ui-expandable-disabled ui-state-disabled")},null);return this},enable:function(b){this.options.disabled=false;this._parseItems(b,function(c){c.add(this._getContentContainer(c)).removeClass("ui-expandable-disabled ui-state-disabled")},null);return this},isExpanded:function(b){var c=true;this._parseItems(b,function(d){if(!d.length){return}if(!this._isExpanded(d)){c=false;return false}},null);return c},setItemStates:function(c){if(this.options.disabled){return this}if(c===undefined||c===null){this.collapse()}else{var b=this;this._headers.each(function(e){var d=a(this);if(b._getItemStateFromObj(e,d,c,false)){b._expandItem(d)}else{b._collapseItem(d)}})}return this},toggle:function(b){if(!this.options.disabled){this._parseItems(b,this._toggleItem,this.options.toggleAll)}return this},expand:function(b){if(!this.options.disabled){this._parseItems(b,this._expandItem,this.options.expandAll)}return this},collapse:function(b){if(!this.options.disabled){this._parseItems(b,this._collapseItem,this.options.collapseAll)}return this},_isExpanded:function(b){return this._getContentContainer(b).is(":visible")},_toggleItem:function(b){if(!b.length||this.options.disabled){return}if(this._isExpanded(b)){this._collapseItem(b)}else{this._expandItem(b)}},_expandItem:function(c){if(!c.length||this.options.disabled){return}c.find(".ui-expandable-icon").removeClass(this.options.icon.collapsed).addClass(this.options.icon.expanded).attr("title",this.options.icon.expandedTitle||a.ui.expandable.globalization.defaultIconExpandedTitle);if(!this._isTable){c.removeClass("ui-corner-all").addClass("ui-corner-top")}var b=this._getContentContainer(c);if(this.options.showFx){if(a.effects&&a.effects[this.options.showFx.effect]){b.show(this.options.showFx.effect,this.options.showFx.options,this.options.showFx.duration,this.options.showFx.callback)}else{b[this.options.showFx.effect||"show"]((this.options.showFx.effect?this.options.showFx.duration:null),this.options.showFx.callback)}}else{b.show()}if(a.isFunction(this.options.expanded)){this.options.expanded(this,c[0],b[0])}this._loadContent(c)},_collapseItem:function(c){if(!c.length||this.options.disabled){return}c.find(".ui-expandable-icon").removeClass(this.options.icon.expanded).addClass(this.options.icon.collapsed).attr("title",this.options.icon.collapsedTitle||a.ui.expandable.globalization.defaultIconCollapsedTitle);if(!this._isTable){c.removeClass("ui-corner-top").addClass("ui-corner-all")}var b=this._getContentContainer(c);if(this.options.hideFx){if(a.effects&&a.effects[this.options.hideFx.effect]){b.hide(this.options.hideFx.effect,this.options.hideFx.options,this.options.hideFx.duration,this.options.hideFx.callback)}else{b[(this.options.hideFx.effect=="slideDown"?"slideUp":(this.options.hideFx.effect=="fadeIn"?"fadeOut":"hide"))]((this.options.hideFx.effect?this.options.hideFx.duration:null),this.options.hideFx.callback)}}else{b.hide()}if(a.isFunction(this.options.collapsed)){this.options.collapsed(this,c[0],b[0])}},loadContent:function(c,b){if(this.options.ajax&&this.options.ajax.enabled===true&&this.options.ajax.attr&&this.options.ajax.attr.length){this._parseItems(c,function(d){this._loadContent(d,b)},null)}return this},setContent:function(d,b){if(d===undefined||d===null){throw"No items specified."}if(d instanceof jQuery){this._setItemContent(d,b,false,false);return this}if(typeof d==="number"&&d>=0){this._setItemContent(this._headers.eq(d),b,false,false);return this}if(typeof d==="string"){if(d==="first"||d==="last"){this._setItemContent(this._headers[d](),b,false,false)}else{this._setItemContent(this._headers.filter("#"+d),b,false,false)}return this}for(var e in d){if(typeof d[e]==="string"){var c=parseInt(e);if(!isNaN(c)&&c>=0){this._setItemContent(this._headers.eq(c),d[e],false,false)}else{this._setItemContent(this._headers.filter("#"+e),d[e],false,false)}}}return this},_setItemContent:function(d,b,e,f){if(!d.length){return}var g=this._getContentElement(d).html(b);if(e&&this.options.ajax.cache===true){d.data("expandable.ajaxLoaded",!f)}var c=e&&f?this.options.ajax.failedLoad:this.options.contentSet;if(a.isFunction(c)){c(this,d[0],g[0])}},_loadContent:function(d,c){if(!d.length){return}if(this.options.ajax&&this.options.ajax.enabled===true&&this.options.ajax.attr&&this.options.ajax.attr.length&&(c||this.options.ajax.cache!==true||d.data("expandable.ajaxLoaded")!==true)){var h=d.attr(this.options.ajax.attr);if(h.length){var g=this.options.ajax.options&&a.isFunction(this.options.ajax.options.success)?this.options.ajax.options.success:null;var b=this.options.ajax.options&&a.isFunction(this.options.ajax.options.error)?this.options.ajax.options.error:null;var e=a.extend(true,{url:h,dataType:"html"},this.options.ajax.options);var f=this;e.success=function(i,k,j){if(g!==null){i=g(i,k,j,d[0])}f._setItemContent(d,i,true,false)};e.error=function(j,k,i){if(b!==null){k=b(j,k,i,d[0])}f._setItemContent(d,k,true,true)};a.ajax(e)}}},_getItemStateFromObj:function(c,b,e,d){if(e===undefined||e===null){return d}if(typeof e==="boolean"){return e}if(a.isFunction(e)){return e(c,b[0])}if(a.isArray(e)){return e.length>=c?e[c]===true:d}if(e[c]!==undefined){return e[c]===true}if(e[c.toString()]!==undefined){return e[c.toString()]===true}var f=b.attr("id");if(f.length&&e[f]!==undefined){return e[f]===true}return d},_parseItems:function(e,c,b){var f=this;if(e===undefined||e===null){this._headers.each(function(){return c.call(f,a(this))});if(a.isFunction(b)){b(this)}return}if(e==="first"||e==="last"){c.call(f,this._headers[e]());return}if(e instanceof jQuery){if(e.length===1){c.call(f,e)}else{if(e.length>1){e.each(function(){return c.call(f,a(this))})}}return}if(typeof e==="number"&&e>=0){c.call(f,this._headers.eq(e));return}if(a.isArray(e)&&e.length>0){for(var d=0;d<e.length;d++){if(typeof e[d]==="number"&&e[d]>=0){if(c.call(f,this._headers.eq(e[d]))===false){break}}else{if(typeof e[d]==="string"){if(c.call(f,this._headers.filter("#"+e[d]))===false){break}}else{throw"Array items must be either a non-negative number or a string."}}}return}throw"items parameter must be either a non-negative number or an array of (non-negative) numbers and/or HTML ID attribute string values."}});a.ui.expandable.globalization={defaultIconCollapsedTitle:"Click to expand",defaultIconExpandedTitle:"Click to collapse"}})(jQuery);